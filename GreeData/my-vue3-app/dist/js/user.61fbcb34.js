(function(){"use strict";var e={2837:function(e,t,n){var o=n(3751),a=(n(4114),n(641)),i=n(33),l=n(953),r=n.p+"img/i1.4081aa7d.png",s=n.p+"img/i2.b39283f8.png",u=n.p+"img/i3.14d512a6.png",c=n.p+"img/v1.91ae6d59.png",d=n.p+"img/v2.479e0815.png",v=n.p+"img/v3.7ed7aeb0.png",p=n.p+"img/v4.699d460b.png";const m={id:"app"},g=(0,a.Lk)("header",null,[(0,a.Lk)("h1",null,"Green Data")],-1),h={class:"chat-window"},f={class:"chat-window"},y=(0,a.Lk)("div",{id:"init-message",class:"message"},"Salut ! Envoie-moi des messages, photos ou vidéos pour voir le trajet de tes données en temps réel !",-1),k={key:0},w=["src"],b=["src"],L={class:"chat-input"},C={class:"chat-input-buttons"},E=(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"em",viewBox:"0 0 256 256"},[(0,a.Lk)("path",{fill:"currentColor",d:"M224 160V48a16 16 0 0 0-16-16H48a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h160a16 16 0 0 0 16-16v-48ZM208 48v92.7L179.3 112a16.1 16.1 0 0 0-22.6 0L112 156.7L91.3 136a16.1 16.1 0 0 0-22.6 0L48 156.7V48Zm0 160H48v-28.7l32-32l20.7 20.7a16.1 16.1 0 0 0 22.6 0l44.7-44.7l40 40V208ZM91.5 100.5A11.9 11.9 0 0 1 88 92a12 12 0 0 1 24 0a12 12 0 0 1-12 12a12.3 12.3 0 0 1-8.5-3.5Z"})],-1),x=[E],O=(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"2em",height:"2em",viewBox:"0 0 256 256"},[(0,a.Lk)("path",{fill:"currentColor",d:"M244 73.1a7.7 7.7 0 0 0-8 0l-44 25.1V92a40 40 0 0 0-40-40H24A16 16 0 0 0 8 68v96a40 40 0 0 0 40 40h128a16 16 0 0 0 16-16v-30.2l44 25.1a8.3 8.3 0 0 0 4 1.1a8 8 0 0 0 4-1.1a7.8 7.8 0 0 0 4-6.9V80a7.8 7.8 0 0 0-4-6.9ZM176 188H48a24.1 24.1 0 0 1-24-24V68h128a24.1 24.1 0 0 1 24 24v96Zm56-25.8l-40-22.8v-22.8l40-22.8Z"})],-1),V=[O],S={class:"image-list"},K=["src","onClick"],X={class:"image-list"},j=["src","onClick"];var M={__name:"App",setup(e){const t=(0,l.KR)(""),n=(0,l.KR)([]),E=(0,l.KR)(!1),O=(0,l.KR)(!1),M=(0,l.KR)("btt"),_=(0,l.KR)([r,s,u]),N=(0,l.KR)([c,d,v,p]),R=`${Z(1,255)}.${Z(1,255)}.${Z(1,255)}.${Z(1,255)}`;function Z(e,t){return String(Math.floor(Math.random()*(t-e)+e))}async function F(e,o){const a={id:Date.now(),type:e,content:"text"===e?t.value:o,address:R};try{const o=await fetch("https://hyblab.polytech.univ-nantes.fr/ocean-2/messages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!o.ok)throw new Error("Network response was not ok.");n.value.push(a),"text"===e&&(t.value=""),"image"===e&&(E.value=!1),"video"===e&&(O.value=!1)}catch(i){console.error("Error sending message:",i)}}async function I(){try{const e=await fetch("https://hyblab.polytech.univ-nantes.fr/ocean-2/messages");if(!e.ok)throw new Error("Network response was not ok.");const t=await e.json();n.value=t}catch(e){console.error("Error fetching messages:",e)}}return document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector("#inputmsg"),t=document.querySelector(".chat-window"),n=document.querySelector(".chat-send"),o=document.querySelector("#image-button"),a=document.querySelector("#video-button");e.addEventListener("focus",(()=>{n.style.display="block",o.style.display="none",a.style.display="none"})),t.addEventListener("DOMNodeInserted",(e=>{e.target.parentNode.className==t.className&&(n.style.display="none",o.style.display="flex",a.style.display="flex",window.scrollTo(0,document.body.scrollHeight))}))})),(0,a.sV)((()=>{I(),setInterval(I,1e3)})),(e,l)=>{const r=(0,a.g2)("el-drawer");return(0,a.uX)(),(0,a.CE)("div",m,[g,(0,a.Lk)("div",h,[(0,a.Lk)("div",f,[y,((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.value,(e=>((0,a.uX)(),(0,a.CE)("div",{class:"message right",key:e.id},["text"===e.type?((0,a.uX)(),(0,a.CE)("div",k,(0,i.v_)(e.content),1)):"image"===e.type?((0,a.uX)(),(0,a.CE)("img",{key:1,src:e.content,alt:"Sent Image"},null,8,w)):"video"===e.type?((0,a.uX)(),(0,a.CE)("img",{key:2,src:e.content,alt:"Sent Video"},null,8,b)):(0,a.Q3)("",!0)])))),128))])]),(0,a.Lk)("div",L,[(0,a.bo)((0,a.Lk)("input",{id:"inputmsg","onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),placeholder:"Écrivez un message…"},null,512),[[o.Jo,t.value]]),(0,a.Lk)("div",C,[(0,a.Lk)("button",{id:"image-button",style:{},onClick:l[1]||(l[1]=e=>E.value=!0)},x),(0,a.Lk)("button",{id:"video-button",style:{},onClick:l[2]||(l[2]=e=>O.value=!0)},V),(0,a.bF)(r,{modelValue:E.value,"onUpdate:modelValue":l[3]||(l[3]=e=>E.value=e),title:"Envoyer une image",direction:M.value,size:"50%"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",S,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(_.value,(e=>((0,a.uX)(),(0,a.CE)("img",{src:e,key:e,onClick:t=>F("image",e),class:"image-item"},null,8,K)))),128))])])),_:1},8,["modelValue","direction"]),(0,a.bF)(r,{modelValue:O.value,"onUpdate:modelValue":l[4]||(l[4]=e=>O.value=e),title:"Envoyer une vidéo",direction:M.value,size:"50%"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",X,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(N.value,(e=>((0,a.uX)(),(0,a.CE)("img",{src:e,key:e,onClick:t=>F("video",e),class:"image-item"},null,8,j)))),128))])])),_:1},8,["modelValue","direction"]),(0,a.Lk)("button",{class:"chat-send",onClick:l[5]||(l[5]=e=>F("text",t.value.value))}," Envoyer ")])])])}}};const _=M;var N=_,R=n(1445);n(4188);const Z=(0,o.Ef)(N);Z.use(R.A),Z.mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,i){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],i=e[c][2];for(var r=!0,s=0;s<o.length;s++)(!1&i||l>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(r=!1,i<l&&(l=i));if(r){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,a,i]}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p="/ocean-2/"}(),function(){var e={806:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,i,l=o[0],r=o[1],s=o[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(s)var c=s(n)}for(t&&t(o);u<l.length;u++)i=l[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},o=self["webpackChunkmy_vue3_app"]=self["webpackChunkmy_vue3_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(2837)}));o=n.O(o)})();
//# sourceMappingURL=user.61fbcb34.js.map